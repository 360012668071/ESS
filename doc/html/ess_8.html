<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on July, 30 2004 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>ESS -- Emacs Speaks Statistics: G. Editing S functions</title>

<meta name="description" content="ESS -- Emacs Speaks Statistics: G. Editing S functions">
<meta name="keywords" content="ESS -- Emacs Speaks Statistics: G. Editing S functions">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD55"></a>
<a name="SEC55"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ess_7.html#SEC54" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC56" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess_7.html#SEC40" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> G. Editing S functions </h1>

<p>ESS provides facilities for editing S objects within your Emacs
session.  Most editing is performed on S functions, although in
theory you may edit datasets as well.  Edit buffers are always
associated with files, although you may choose to make these files
temporary if you wish.  Alternatively, you may make use of a simple yet
powerful mechanism for maintaining backups of text representations of
S functions.  Error-checking is performed when S code is loaded
into the ESS process.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC56">G.1 Creating or modifying S objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Edit objects in a specialized buffer
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC57">G.2 Loading source files into the ESS process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC58">G.3 Detecting errors in source files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC59">G.4 Sending code to the ESS process</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC60">G.5 Indenting and formatting S code</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC61">G.6 Commands for motion, completion and more</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC62">G.7 Maintaining S source files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#SEC63">G.8 Names and locations of dump files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="NOD56"></a>
<a name="SEC56"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC55" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC57" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.1 Creating or modifying S objects </h2>

<p>To edit an S object, type

</p><ul>
<li>
<p><kbd>C-c C-d</kbd> (<code>ess-dump-object-into-edit-buffer</code>) <br>
<a name="IDX110"></a>
Edit an S object in its own edit buffer.
</p></li></ul>

<p>from within the ESS process buffer (<code>*S*</code>).  You will then be
prompted for an object to edit: you may either type in the name of an
existing object (for which completion is available using the <kbd>TAB</kbd>
key),
<a name="IDX111"></a>
or you may enter the name of a new object.
<a name="IDX112"></a>
<a name="IDX113"></a>
A buffer will be created containing the text representation of the
requested object or, if you entered the name of a non-existent object at
the prompt and the variable <code>ess-function-template</code>
<a name="IDX114"></a>
is non-<code>nil</code>, you will be presented with a template defined by that
variable, which defaults to a skeleton function construct.

</p><p>You may then edit the function as required.  The edit buffer generated
by <code>ess-dump-object-into-edit-buffer</code> is placed in the <code>ESS</code>
major mode which provides a number of commands to facilitate editing
S source code.  Commands are provided to intelligently indent S
code, evaluate portions of S code and to move around S code
constructs.

</p><a name="IDX115"></a>
<a name="IDX116"></a>
<p>Note: when you dump a file with <kbd>C-c C-d</kbd>, ESS first checks
to see whether there already exists an edit buffer containing that
object and, if so, pops you directly to that buffer.  If not, ESS next
checks whether there is a file in the appropriate place with the
appropriate name (see section <a href="#SEC62">Maintaining S source files</a>) and if so, reads in that file.
You can use this facility to return to an object you were editing in a
previous session (and which possibly was never loaded to the S
session).  Finally, if both these tests fail, the ESS process is
consulted and a <code>dump()</code> command issued.
<a name="IDX117"></a>
If you want to force ESS to ask the ESS process for the object's
definition (say, to reformat an unmodified buffer or to revert back to
S's idea of the object's definition) pass a prefix argument to
<code>ess-dump-object-into-edit-buffer</code> by typing <kbd>C-u C-c C-d</kbd>.

</p><hr size="6">
<a name="NOD57"></a>
<a name="SEC57"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC56" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC58" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.2 Loading source files into the ESS process </h2>

<p>The best way to get information -- particularly function definitions
-- into S is to load them in as source file, using S's
<code>source</code> function.  You have already seen how to create source
files using <kbd>C-c C-d</kbd>; ESS provides a complementary command for
loading source files (even files not created with ESS!) into the ESS
process:

</p><ul>
<li>
<p><kbd>C-c C-l</kbd> (<code>ess-load-file</code>) <br>
<a name="IDX118"></a>
Loads a file into the ESS process using <code>source()</code>.
<a name="IDX119"></a>
</p></li></ul>


<p>After typing <kbd>C-c C-l</kbd> you will prompted for the name of the file to
load into S; usually this is the current buffer's file which is the
default value (selected by simply pressing <kbd>RET</kbd> at the prompt).
You will be asked to save the buffer first if it has been modified (this
happens automatically if the buffer was generated with <kbd>C-c C-d</kbd>).
The file will then be loaded, and if it loads successfully you will be
returned to the ESS process.

</p><hr size="6">
<a name="NOD58"></a>
<a name="SEC58"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC57" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC59" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.3 Detecting errors in source files </h2>
<p>If any errors occur when loading a file with <code>C-c C-l</code>, ESS will
inform you of this fact.  In this case, you can jump directly to the
line in the source file which caused the error by typing <kbd>C-x `</kbd>
(<code>ess-parse-errors</code>).
<a name="IDX120"></a>
You will be returned to the offending file (loading it into a buffer if
necessary) with point at the line S reported as containing the
error.  You may then correct the error, and reload the file.  Note that
none of the commands in an S source file will take effect if any
part of the file contains errors.

</p><p>Sometimes the error is not caused by a syntax error (loading a
non-existent file for example). In this case typing <kbd>C-x `</kbd> will
simply display a buffer containing S's error message.  You can force
this behavior (and avoid jumping to the file when there <em>is</em> a
syntax error) by passing a prefix argument to <code>ess-parse-errors</code>
with <kbd>C-u C-x `</kbd>.

</p><hr size="6">
<a name="NOD59"></a>
<a name="SEC59"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC58" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC60" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.4 Sending code to the ESS process </h2>

<p>Other commands are also available for evaluating portions of code in the
S process.  These commands cause the selected code to be evaluated
directly by the ESS process as if you had typed them in at the
command line; the <code>source()</code> function is not used.  You may choose
whether both the commands and their output appear in the process buffer
(as if you had typed in the commands yourself) or if the output alone is
echoed.  The behavior is controlled by the variable
<code>ess-eval-visibly-p</code> whose default is <code>nil</code>
<a name="IDX121"></a>
(display output only).  Passing a prefix argument (<kbd>C-u</kbd>) to any of
the following commands, however, reverses the meaning of
<code>ess-eval-visibly-p</code> for that command only -- for example <kbd>C-u
C-c C-j</kbd> echoes the current line of S (or other) code in the ESS
process buffer, followed by its output.  This method of evaluation is an
alternative to S's <code>source()</code> function
<a name="IDX122"></a>
<a name="IDX123"></a>
<a name="IDX124"></a>
when you want the input as well as the output to be displayed.  (You can
sort of do this with <code>source()</code> when the option <code>echo=T</code> is
set, except that prompts do not get displayed.  ESS puts prompts in the
right places.) The commands for evaluating code are:

</p><ul>
<li><a name="IDX125"></a></li><li>
<p><kbd>C-c C-j</kbd> (<code>ess-eval-line</code>) <br>
<a name="IDX126"></a>
Send the line containing point to the ESS process.

</p></li><li>
<p><kbd>C-c M-j</kbd> (<code>ess-eval-line-and-go</code>) <br>
<a name="IDX127"></a>
As above, but returns you to the ESS process buffer as well.

</p></li><li>
<p><kbd>C-c C-f</kbd> or <kbd>ESC C-x</kbd> (aka <kbd>M-C-x</kbd>) (<code>ess-eval-function</code>) <br>
<a name="IDX128"></a>
Send the S function containing point to the ESS process.

</p></li><li>
<p><kbd>C-c M-f</kbd> (<code>ess-eval-function-and-go</code>) <br>
<a name="IDX129"></a>
As above, but returns you to the ESS process buffer as well.

</p></li><li>
<p><kbd>C-c C-r</kbd> (<code>ess-eval-region</code>) <br>
<a name="IDX130"></a>
Send the text between point and mark to the ESS process.

</p></li><li>
<p><kbd>C-c M-r</kbd> (<code>ess-eval-region-and-go</code>) <br>
<a name="IDX131"></a>
As above, but returns you to the ESS process buffer as well.

</p></li><li>
<p><kbd>C-c C-b</kbd> (<code>ess-eval-buffer</code>) <br>
<a name="IDX132"></a>
Send the contents of the edit buffer to the ESS process.

</p></li><li>
<p><kbd>C-c M-b</kbd> (<code>ess-eval-buffer-and-go</code>) <br>
<a name="IDX133"></a>
As above, but returns you to the ESS process buffer as well.

</p></li><li>
<p><kbd>C-c C-n</kbd> (<code>ess-eval-line-and-step</code>) <br>
<a name="IDX134"></a>
<a name="IDX135"></a>
<a name="IDX136"></a>
Sends the current line to the ESS process, echoing it in the process
buffer, and moves point to the next line.  Useful when debugging for
stepping through your code.
</p></li></ul>

<p>It should be stressed once again that these <code>ess-eval-</code> commands
should only be used for evaluating small portions of code for debugging
purposes, or for generating transcripts from source files.  When editing
S functions, <kbd>C-c C-l</kbd> is the command to use to update the
function's value.  In particular, <code>ess-eval-buffer</code> is now largely
obsolete.

</p><p>One final command is provided for spot-evaluations of S code:

</p><ul>
<li><p><kbd>C-c C-t</kbd> (<code>ess-execute-in-tb</code>) <br>
<a name="IDX137"></a>
Prompt for an S expression and evaluate it.  Displays result in a
temporary buffer.
</p></li></ul>


<p>This is useful for quick calculations, etc.

</p><p>All the above commands are useful for evaluating small amounts of code
and observing the results in the process buffer.  A useful way to work
is to divide the frame into two windows; one containing the source code
and the other containing the process buffer.  If you wish to make the
process buffer scroll automatically when the output reaches the bottom
of the window, you will need to set the variable
<code>comint-scroll-to-bottom-on-output</code> to <code>'others</code> or <code>t</code>.

</p><p>*** Maybe a link to customization section here ***

</p><hr size="6">
<a name="NOD60"></a>
<a name="SEC60"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC59" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC61" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.5 Indenting and formatting S code </h2>

<p>ESS now provides a sophisticated mechanism for indenting S source
code (thanks to Ken'ichi Shibayama).  Compound statements (delimited by
`<samp>{</samp>' and `<samp>}</samp>') are indented relative to their enclosing block.
In addition, the braces have been electrified to automatically indent to
the correct position when inserted, and optionally insert a newline at
the appropriate place as well.  Lines which continue an incomplete
expression are indented relative to the first line of the expression.
Function definitions, <code>if</code> statements, calls to <code>expression()</code>
and loop constructs are all recognized and indented appropriately.  User
variables are provided to control the amount if indentation in each
case, and there are also a number of predefined indentation styles to
choose from.  See section <a href="ess_13.html#SEC85">Variables controlling indentation</a>.

</p><a name="IDX138"></a>
<p>Comments are also handled specially by ESS, using an idea borrowed from
the Emacs-Lisp indentation style.  By default,
comments beginning with `<samp>###</samp>'
are aligned to the beginning of the line.  Comments beginning with
`<samp>##</samp>' are aligned to the current level of indentation for the block
containing the comment.  Finally, comments beginning with `<samp>#</samp>' are
aligned to a column on the right (the 40th column by default, but this
value is controlled by the variable <code>comment-column</code>,)
<a name="IDX139"></a>
or just after the expression on the line containing the comment if it
extends beyond the indentation column.  You turn off the default
behavior by adding the line
<code>(setq ess-fancy-comments nil)</code> to your `<tt>.emacs</tt>' file.
<a name="IDX140"></a>

</p><p>The indentation commands provided by ESS are:
<a name="IDX141"></a>
<a name="IDX142"></a>

</p><ul>
<li>
<p><kbd>TAB</kbd> (<code>ess-indent-command</code>) <br>
Indents the current line as S code.  If a prefix argument is given,
all following lines which are part of the same (compound) expression are
indented by the same amount (but relative indents are preserved).

</p></li><li>
<p><kbd>LFD</kbd> (<code>newline-and-indent</code>) <br>
Insert a newline, and indent the next line.  (Note: if your keyboard
does not have a <kbd>LINEFEED</kbd> key, you can use <kbd>C-j</kbd> instead.)
Some people prefer to bind <kbd>RET</kbd> to this command.

</p></li><li>
<p><kbd>ESC C-q</kbd> aka <kbd>M-C-q</kbd> aka <kbd>C-M-q</kbd> (<code>ess-indent-exp</code>) <br>
Indents each line in the S (compound) expression which follows point.
Very useful for beautifying your S code.

</p></li><li>
<p><kbd>{</kbd> and <kbd>}</kbd> (<code>ess-electric-brace</code>) <br>
The braces automatically indent to the correct position when typed.

</p></li><li>
<p><kbd>M-;</kbd> (<code>indent-for-comment</code>) <br>
Indents a comment line appropriately, or inserts an empty
(single-`<samp>#</samp>') comment.

</p></li><li>
<p><kbd>M-x ess-set-style</kbd> <br>
Set the formatting style in this buffer to be one of the predefined
styles: <code>GNU</code>, <code>BSD</code>, <code>K&amp;R</code>, <code>CLB</code>, and <code>C++</code>.
The <code>DEFAULT</code> style uses the default values for the indenting
variables (unless they have been modified in your `<tt>.emacs</tt>' file.)
<a name="IDX143"></a>
This command causes all of the formatting variables
see section <a href="ess_13.html#SEC85">Variables controlling indentation</a> to be buffer-local.
</p></li></ul>

<hr size="6">
<a name="NOD61"></a>
<a name="SEC61"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC60" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC62" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.6 Commands for motion, completion and more </h2>

<p>A number of commands are provided to move across function definitions
in the edit buffer:
</p><ul>
<li>
<p><kbd>ESC C-a</kbd> aka <kbd>C-M-a</kbd> (<code>ess-beginning-of-function</code>) <br>
<a name="IDX144"></a>
Moves point to the beginning of the function containing point.

</p></li><li>
<p><kbd>ESC C-e</kbd> aka <kbd>C-M-e</kbd> (<code>ess-end-of-function</code>) <br>
<a name="IDX145"></a>
Moves point to the end of the function containing point.

</p></li><li>
<p><kbd>ESC C-h</kbd> aka <kbd>C-M-h</kbd> (<code>ess-mark-function</code>) <br>
Places point at the beginning of the S function containing point, and
mark at the end.
</p></li></ul>

<p>Don't forget the usual Emacs commands for moving over balanced
expressions and parentheses: See <a href="../Emacs/Lists.html">Lists and Sexps: (Emacs)Lists</a> section `Lists and Sexps' in <cite>The GNU Emacs Reference Manual</cite>.

</p><a name="IDX146"></a>
<p>Completion is provided in the edit buffer in a similar fashion to the
process buffer: <kbd>M-TAB</kbd> completes file names and <kbd>M-?</kbd> lists
file completions.  Since <kbd>TAB</kbd> is used for indentation in the edit
buffer, object completion is now performed with <kbd>C-c TAB</kbd>.  Note
however that completion is only provided over globally known S objects
(such as system functions) -- it will <em>not</em> work for arguments to
functions or other variables local to the function you are editing.

</p><p>Finally, two commands are provided for returning to the ESS process buffer:

</p><ul>
<li>
<p><kbd>C-c C-z</kbd> (<code>ess-switch-to-end-of-ESS</code>) <br>
<a name="IDX147"></a>
Returns you to the ESS process buffer, placing point at the end of the
buffer.

</p></li><li>
<p><kbd>C-c C-y</kbd> (<code>ess-switch-to-ESS</code>) <br>
<a name="IDX148"></a>
Also returns to to the ESS process buffer, but leaves point where it was.
</p></li></ul>

<p>In addition some commands available in the process buffer are also
available in the edit buffer.  You can still read help files with
<kbd>C-c C-v</kbd>, edit another function with <kbd>C-c C-d</kbd> and of course
<kbd>C-c C-l</kbd> can be used to load a source file into S.  See section <a href="ess_7.html#SEC54">Other commands provided by inferior-ESS</a>,
for more details on these commands.

</p><hr size="6">
<a name="NOD62"></a>
<a name="SEC62"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC61" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC63" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.7 Maintaining S source files </h2>

<p>Every edit buffer in ESS is associated with a <em>dump file</em> on disk.
Dump files are created whenever you type <kbd>C-c C-d</kbd>
(<code>ess-dump-object-into-edit-buffer</code>), and may either be deleted
after use, or kept as a backup file or as a means of keeping several
versions of an S function.
<a name="IDX149"></a>

</p><dl>
<dt><u>User Option:</u> <b>ess-delete-dump-files</b>
<a name="IDX150"></a>
</dt>
<dd><p>If non-<code>nil</code>, dump files created with C-c C-d are deleted
immediately after they are created by the ess-process.
</p></dd></dl>

<p>Since immediately after S dumps an object's definition to a disk
file the source code on disk corresponds exactly to S's idea of the
object's definition, the disk file isn't needed; deleting it now has the
advantage that if you <em>don't</em> modify the file (say, because you
just wanted to look at the definition of one of the standard S
functions) the source dump file won't be left around when you kill the
buffer.  Note that this variable only applies to files generated with
S's <code>dump</code> function; it doesn't apply to source files which already
exist.  The default value is <code>t</code>.

</p><dl>
<dt><u>User Option:</u> <b>ess-keep-dump-files</b>
<a name="IDX151"></a>
</dt>
<dd><p>Option controlling what to do with the dump file after an object has
been successfully loaded into S.  Valid values are <code>nil</code> (always
delete), <code>ask</code> (always ask whether to delete), <code>check</code> (delete
files generated with <kbd>C-c C-d</kbd> in this Emacs session, otherwise ask
-- this is the default) and <code>t</code> (never delete).  This variable is
buffer-local.
</p></dd></dl>

<p>After an object has been successfully (i.e. without error) loaded
back into S with <kbd>C-c C-l</kbd>, the disk file again corresponds
exactly (well, almost -- see below) to S's record of the object's
definition, and so some people prefer to delete the disk file rather
than unnecessarily use up space.  This option allows you to do just
that.

</p><a name="IDX152"></a>
<a name="IDX153"></a>
<a name="IDX154"></a>
<p>If the value of <code>ess-keep-dump-files</code> is <code>t</code>, dump files are
never deleted after they are loaded.  Thus you can maintain a complete
text record of the functions you have edited within ESS.  Backup files
are kept as usual, and so by using the Emacs numbered backup facility --
see <a href="../emacs/Backup-Names.html">Single or Numbered Backups: (emacs)Backup Names</a> section `Single or Numbered Backups' in <cite>The Gnu Emacs Reference Manual</cite>, you can keep a historic
record of function definitions.  Another possibility is to maintain the
files with a version-control system such as RCS See <a href="../emacs/Version-Control.html">Version Control: (emacs)Version Control</a> section `Version Control' in <cite>The Gnu Emacs Reference Manual</cite>.  As long as a dump file exists in the appropriate place for a
particular object, editing that object with <kbd>C-c C-d</kbd> finds that
file for editing (unless a prefix argument is given) -- the ESS
process is not consulted.  Thus you can keep comments <em>outside</em> the
function definition as a means of documentation that does not clutter
the S object itself.  Another useful feature is that you may format
the code in any fashion you please without S re-indenting the code
every time you edit it.  These features are particularly useful for
project-based work.

</p><p>If the value of <code>ess-keep-dump-files</code> is nil, the dump file is always
silently deleted after a successful load with <kbd>C-c C-l</kbd>.  While this
is useful for files that were created with <kbd>C-c C-d</kbd> it also applies
to any other file you load (say, a source file of function
definitions), and so can be dangerous to use unless you are careful.
Note that since <code>ess-keep-dump-files</code> is buffer-local, you can make
sure particular files are not deleted by setting it to <code>t</code> in the
Local Variables section of the file See <a href="../emacs/File-Variables.html">Local Variables in Files: (emacs)File Variables</a> section `Local Variables in Files' in <cite>The Gnu Emacs Reference Manual</cite>.

</p><p>A safer option is to set <code>ess-keep-dump-files</code> to <code>ask</code>; this
means that ESS will always ask for confirmation before deleting the
file.  Since this can get annoying if you always want to delete dump
files created with <code>C-c C-d</code>, but not any other files, setting
<code>ess-keep-dump-files</code> to <code>check</code> (the default value) will
silently delete dump files created with <kbd>C-c C-d</kbd> in the current
Emacs session, but query for any other file.  Note that in any case you
will only be asked for confirmation once per file, and your answer is
remembered for the rest of the Emacs session.

</p><p>Note that in all cases, if an error (such as a syntax error) is detected
while loading the file with <kbd>C-c C-l</kbd>, the dump file is <em>never</em>
deleted.  This is so that you can edit the file in a new Emacs session
if you happen to quit Emacs before correcting the error.

</p><a name="IDX155"></a>
<p>Dump buffers are always autosaved, regardless of the value of
<code>ess-keep-dump-files</code>.

</p><hr size="6">
<a name="NOD63"></a>
<a name="SEC63"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC62" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC55" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> G.8 Names and locations of dump files </h2>

<p>Every dump file should be given a unique file name, usually the dumped
object name with some additions.

</p><dl>
<dt><u>User Option:</u> <b>ess-dump-filename-template</b>
<a name="IDX156"></a>
</dt>
<dd><p>Template for filenames of dumped objects.  <code>%s</code> is replaced by the
object name.
</p></dd></dl>


<p>By default, dump file names are the user name, followed by `<samp>.</samp>' and
the object and ending with `<samp>.S</samp>'.  Thus if user <code>joe</code> dumps the
object <code>myfun</code> the dump file will have name `<tt>joe.myfun.S</tt>'.
The username part is included to avoid clashes when dumping into a
publicly-writable directory, such as `<tt>/tmp</tt>'; you may wish to remove
this part if you are dumping into a directory owned by you.

</p><a name="IDX157"></a>
<p>You may also specify the directory in which dump files are written:

</p><dl>
<dt><u>User Option:</u> <b>ess-source-directory</b>
<a name="IDX158"></a>
</dt>
<dd><p>Directory name (ending in a slash) where S dump files are to be written.
</p></dd></dl>

<p>By default, dump files are always written to `<tt>/tmp</tt>', which is fine
when <code>ess-keep-dump-files</code> is <code>nil</code>.  If you are keeping dump
files, then you will probably want to keep them somewhere in your home
directory, say `<tt>~/S-source</tt>'.  This could be achieved by including
the following line in your `<tt>.emacs</tt>' file:
<a name="IDX159"></a>
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-source-directory (expand-file-name &quot;~/S-source/&quot;))
</pre></td></tr></table>
<p>If you would prefer to keep your dump files in separate directories
depending on the value of some variable, ESS provides a facility for
this also.  By setting <code>ess-source-directory</code> to a lambda
expression which evaluates to a directory name, you have a great deal of
flexibility in selecting the directory for a particular source file to
appear in.  The lambda expression is evaluated with the process buffer
as the current buffer and so you can use the variables local to that
buffer to make your choice.  For example, the following expression
causes source files to be saved in the subdirectory `<tt>Src</tt>' of the
directory the ESS process was run in.

</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-source-directory
      (lambda ()
         (concat ess-directory &quot;Src/&quot;)))
</pre></td></tr></table>

<a name="IDX160"></a>
<p>(<code>ess-directory</code> is a buffer-local variable in process buffers
which records the directory the ESS process was run from.)  This is
useful if you keep your dump files and you often edit objects with the
same name in different ESS processes.  Alternatively, if you often
change your S working directory during an S session, you may
like to keep dump files in some subdirectory of the directory pointed to
by the first element of the current search list.  This way you can edit
objects of the same name in different directories during the one S
session:
<a name="IDX161"></a>
<a name="IDX162"></a>
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-source-directory
   (lambda ()
       (file-name-as-directory
        (expand-file-name (concat
                           (car ess-search-list)
                           &quot;/.Src&quot;)))))
</pre></td></tr></table><a name="IDX163"></a>

<p>If the directory generated by the lambda function does not exist but can
be created, you will be asked whether you wish to create the directory.
If you choose not to, or the directory cannot be created, you will not
be able to edit functions.

</p>
<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC55" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess_9.html#SEC64" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Rodney Sparapani</em> on <em>July, 30 2004</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
