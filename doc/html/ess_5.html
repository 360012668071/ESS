<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on June, 30 2004 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>ESS -- Emacs Speaks Statistics: D. Help for SAS</title>

<meta name="description" content="ESS -- Emacs Speaks Statistics: D. Help for SAS">
<meta name="keywords" content="ESS -- Emacs Speaks Statistics: D. Help for SAS">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD26"></a>
<a name="SEC26"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ess_4.html#SEC25" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess_4.html#SEC18" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> D. Help for SAS </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC27">D.1 ESS[SAS]-Design philosophy</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC28">D.2 ESS[SAS]-Editing files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC29">D.3 iESS[SAS]-Interactive SAS processes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC30">D.4 ESS[SAS]-Batch SAS processes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC31">D.5 ESS[SAS]-Function keys for batch processing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC32">D.6 ESS[SAS]-TAB key</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC33">D.7 ESS[SAS]-Usage scenarios</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC34">D.8 iESS[SAS]-Common problems</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC35">D.9 ESS[SAS]-MS Windows</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p>ESS[SAS] was designed for use with SAS.  It is descended from emacs 
macros developed by John Sall for editing SAS programs and SAS-mode by 
Tom Cook.  Those editing features and new advanced features are part of 
ESS[SAS].  The user interface of ESS[SAS] has similarities with ESS[S]
and the SAS Display Manager.

</p><hr size="6">
<a name="NOD27"></a>
<a name="SEC27"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC26" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC28" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.1 ESS[SAS]-Design philosophy </h2>

<p>ESS[SAS] was designed to aid the user in writing and maintaining
SAS programs, such as myfile.sas.  Both interactive and batch submission
of SAS programs is supported.   

</p><p>ESS[SAS] was written with two primary goals.

</p><p>1. The emacs text editor provides a powerful and flexible development
environment for programming languages.  These features are a boon to all
programmers and, with the help of ESS[SAS], to SAS users as well.

</p><p>2. Although a departure from SAS Display Manager, ESS[SAS] provides
similar key definitions to give novice ESS[SAS] users a head start.
Also, inconvenient SAS Display Manager features, like remote submission
and syntax highlighting, are provided transparently; appealing to
advanced ESS[SAS] users.

</p><hr size="6">
<a name="NOD28"></a>
<a name="SEC28"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC27" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC29" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.2 ESS[SAS]-Editing files </h2>

<p>ESS[SAS] is the mode for editing SAS language files.  This mode handles:

</p><table><tr><td>&nbsp;</td><td><pre class="display">- proper indenting, generated by both [Tab] and [Return].
- color and font choices based on syntax.
- ability to send the contents of an entire buffer, a highlighted region,
  or a single line to an interactive SAS process.
- ability to switch between processes which would be the target of the
  buffer (for the above).
- ability to save and submit the file you are working on as a batch SAS
  process with a single keypress and to continue editing while it is runs
  in the background.
- capability of killing the batch SAS process through the shell buffer or
  allow the SAS process to keep on running after you exit emacs.
- single keypress navigation of .sas, .log and .lst files (.log and .lst
  files are automatically refreshed with each keypress).
</pre></td></tr></table>
<p>ESS[SAS] is automatically turned on when editing a file with a .sas 
suffix (or other extension, if specified via auto-mode-alist).  The function
keys can be enabled to use the same function keys that
the SAS Display Manager does.  The interactive capabilities of ESS require you 
to start an inferior SAS process with M-x SAS
(See section <a href="#SEC29">iESS[SAS]-Interactive SAS processes</a>.)

</p><p>At this writing, the indenting and syntax highlighting are generally
correct.  Known issues: for multiple line * or %* comments, only the
first line is highlighted; for .log files, only the first line of a
NOTE:, WARNING: or ERROR: message is highlighted; unmatched
single/double quotes in CARDS data lines are NOT ignored; in a DO ... TO
or a DO ... TO ... BY statement, TOs are not highlighted (and neither is
BY).

</p><hr size="6">
<a name="NOD29"></a>
<a name="SEC29"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC28" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC30" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.3 iESS[SAS]-Interactive SAS processes </h2>

<p>iESS (inferior ESS) is the method for interfacing with interactive
statistical processes (programs).  iESS[SAS] is what is needed for
interactive SAS programming.  iESS[SAS] works best
with the following settings for SAS command-line options 
(the default of inferior-SAS-args):

</p><table><tr><td>&nbsp;</td><td><pre class="example">-stdio -linesize 80 -noovp -nosyntaxcheck
</pre></td></tr></table>
<table><tr><td>&nbsp;</td><td><pre class="display">-stdio          
            required to make the redirection of stdio work
-linesize 80    
            keeps output lines from folding on standard terminals
-noovp          
            prevents error messages from printing 3 times
-nosyntaxcheck  
            permits recovery after syntax errors
</pre></td></tr></table>
<p>To start up iESS[SAS] mode, use:
</p><table><tr><td>&nbsp;</td><td><pre class="example">   M-x SAS
</pre></td></tr></table>
<p>The *SAS:1.log* buffer in ESStr mode corresponds to the file
myfile.log in SAS batch usage and to the &quot;SAS: LOG&quot; window in the SAS
Display Manager.  All commands submitted to SAS, informative
messages, warnings, and errors appear here.

</p><p>The *SAS:1.lst* buffer in ESSlst mode corresponds to the file
myfile.lst in SAS batch usage and to the &quot;SAS: OUTPUT&quot; window in the
SAS Display Manager.  All data related printed output from the
PROCs appear in this window.

</p><p>The iESS [SAS:1] buffer exists solely as a communications buffer.
Files are edited in the myfile.sas buffer.  The C-c C-r key in
ESS[SAS] is the functional equivalent of bringing a file into the
&quot;SAS: PROGRAM EDITOR&quot; window followed by the 'Local' 'Submit' menu
commands.  The user should never use this buffer directly.

</p>
<p>Troubleshooting: See section <a href="#SEC34">iESS[SAS]-Common problems</a>.

</p><hr size="6">
<a name="NOD30"></a>
<a name="SEC30"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC29" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.4 ESS[SAS]-Batch SAS processes </h2>

<p>Submission of a SAS batch job is dependent on your environment.
ess-sas-submit-method is determined by your operating system and your
shell.  It defaults to 'sh unless you are running Windows or Mac
Classic.  Under Windows, it will default to 'sh if you are using a
Unix-imitating shell; otherwise 'ms-dos for an MS-DOS shell.  On Mac OS
X, it will default to 'sh, but under Mac Classic AppleScript is used
('apple-script).  You will also set this to 'sh if the SAS batch job
needs to run on a remote machine rather than your local machine.  This
works transparently if you are editing the remote file via ange-ftp/EFS
or tramp.  Note that ess-sas-shell-buffer-remote-init is a Local
Variable that defaults to &quot;ssh&quot; which will be used to open the buffer on
the remote host and it is assumed that no password is necessary,
i.e. you are using the equivalent of ssh-agent/ssh-add (see the
discussion about Local Variables below if you need to change the
default).

</p><p>However, if you are editing the file locally and transferring it back
and forth with Kermit, you need some additional steps.  First, start
Kermit locally before remotely logging in.  Open a local copy of the
file with the ess-kermit-prefix character prepended (the default is
&quot;#&quot;).  Execute the command ess-kermit-get which automatically brings the
contents of the remote file into your local copy.  If you transfer files
with Kermit manually in a shell buffer, then note that the Kermit escape
sequence is C-q C-\ c rather than C-\ c which it would be in an ordinary
terminal application, i.e. not in an emacs buffer.  Lastly, note that
the remote Kermit command is specified by ess-kermit-command.

</p><p>The command used by the SUBMIT function key (F3 or F8) to submit a batch
SAS job, whether local or remote, is ess-sas-submit-command which
defaults to sas-program.  sas-program is &quot;invoke SAS using program file&quot;
for Mac Classic and &quot;sas&quot; otherwise.  However, you may have to alter
ess-sas-submit-command for a particular program, so it is defined as
buffer-local.  Conveniently, it can be set at the end of the program:
</p><table><tr><td>&nbsp;</td><td><pre class="example">endsas;
Local variables:
ess-sas-submit-command: &quot;sas8&quot;
End:
</pre></td></tr></table>
<p>The command line is also made of ess-sas-submit-pre-command, 
ess-sas-submit-post-command and ess-sas-submit-command-options 
(the last of which is also buffer-local).
Here are some examples for your .emacs file (you may also use 
M-x customize-variable):
</p><table><tr><td>&nbsp;</td><td><pre class="example">;'sh default
(setq ess-sas-submit-pre-command &quot;nohup&quot;)                 
;'sh default
(setq ess-sas-submit-post-command &quot;-rsasuser &amp;&quot;)          
;'sh example
(setq-default ess-sas-submit-command &quot;/usr/local/sas/sas&quot;)        
;'ms-dos default
(setq ess-sas-submit-pre-command &quot;start&quot;)                 
;'ms-dos default
(setq ess-sas-submit-post-command &quot;-rsasuser -icon&quot;)      
;Windows example
(setq-default ess-sas-submit-command &quot;c:/progra~1/sas/sas.exe&quot;)   
;Windows example
(setq-default ess-sas-submit-command &quot;c:\\progra~1\\sas\\sas.exe&quot;)
</pre></td></tr></table>
<p>There is a built-in delay before a batch SAS job is submitted when using
a Unix-imitating shell under Windows.  This is necessary in many cases 
since the shell might not be ready to receive a command.  This delay is 
currently set high enough so as not to be a problem.  But,
there may be cases when it needs to be set higher, or could be set much
lower to speed things up.  You can over-ride the default in your .emacs
file by:
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-sleep-for 0.2)
</pre></td></tr></table>
<hr size="6">
<a name="NOD31"></a>
<a name="SEC31"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC30" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC32" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.5 ESS[SAS]-Function keys for batch processing </h2>

<p>The setup of function keys for SAS batch processing
is unavoidably complex, but the usage of function keys is simple.  
There are five distinct options:

</p><p>Option 1 (default).  Function keys in ESS[SAS] are not bound to elisp
commands.  This is in accordance with the GNU Elisp Coding Standards
(GECS) which do not allow function keys to be bound so that they are
available to the user.

</p><p>Options 2-5.  Since GECS does not allow function keys to be bound by
modes, these keys are often unused.  So, ESS[SAS] provides users with
the option of binding elisp commands to these keys.  Users who are
familiar with SAS will, most likely, want to duplicate the function key
capabilities of the SAS Display Manager.  There are four options (noted
in parentheses).

</p><ol>
<li>
<p>SAS Display Manager has different function key definitions for
Unix (2, 4) and Windows (3, 5); ESS can use either.
</p></li><li>
<p>The ESS[SAS] function key definitions can be active in all buffers
(global: 4, 5) or limited (local: 2, 3) only to buffers with files that
are associated with ESS[SAS] as specified in your auto-mode-alist.
</p></li></ol>

<p>The distinction between local and global is subtle.  If you want the
ESS[SAS] definitions to work when you are in the *shell* buffer or when
editing files other than the file extensions that ESS[SAS] recognizes,
you will most likely want to use the global definitions.  If you want
your function keys to understand SAS batch commands when you are editing
SAS files, and to behave normally when editing other files, then you
will choose the local definitions.  The option can be chosen by the
person installing ESS for a site or by an individual.

</p><ol>
<li>
<p>For a site installation or an individual, uncomment ONLY ONE of the
following lines in your ess-site.el.  ESS[SAS] Function keys are
available in ESS[SAS] if you uncomment either 2 or 3 and in all modes if
you uncomment 4 or 5:
</p><table><tr><td>&nbsp;</td><td><pre class="example">;;2; (setq ess-sas-local-unix-keys t)
;;3; (setq ess-sas-local-pc-keys t)
;;4; (setq ess-sas-global-unix-keys t)
;;5; (setq ess-sas-global-pc-keys t)
</pre></td></tr></table>
<p>The names -unix- and -pc- have nothing to do with the operating system
that you are running.  Rather, they mimic the definitions that the SAS
Display Manager uses by default on those platforms.

</p></li><li>
<p>If your site installation has configured the keys contrary to your 
liking, then you must call the appropriate function.  
</p><table><tr><td>&nbsp;</td><td><pre class="example"> (load &quot;ess-site&quot;) ;; local-unix-keys
 (ess-sas-global-pc-keys)
</pre></td></tr></table></li></ol>

<p>Finally, we get to what the function keys actually do.  You may recognize
some of the nicknames as SAS Display Manager commands (they are in all 
capitals).

</p><table><tr><td>&nbsp;</td><td><pre class="display">Unix PC  Nickname   &quot;inferior&quot; Alias (if any) and Description  

F2   F2  refresh
                    revert the current buffer with the file of the same 
                    name if the file is newer than the buffer

F3   F8  SUBMIT     C-c C-b
                    save the current .sas file (which is either the .sas 
                    file in the current buffer or the .sas file associated
                    with the .lst or .log file in the current buffer) and 
                    submit the file as a batch SAS job

F4   F5  PROGRAM       
                    switch buffer to .sas file

F5   F6  LOG        C-c C-x
                    switch buffer to .log file, `refresh' and goto next 
                    error message, if any

F6   F7  OUTPUT     C-c C-y
                    switch buffer to .lst file and `refresh'

F7   F4  filetype-1    
                    switch buffer to filetype-1 (defaults to .txt) file 
                    and `refresh'

F8   F3  shell      
                    switch buffer to shell

F9   F9  VIEWTABLE  
                    open an interactive FSEDIT/FSBROWSE session on the SAS 
                    dataset near point

F10  F10  toggle-log    
                    toggle ESS[SAS] for .log files; may be useful for 
                    certain debugging situations

F11  F11  filetype-2
                    switch buffer to filetype-2 (defaults to .dat) file 
                    and `refresh'

F12  F12  viewgraph
                    open a GSASFILE near point for viewing either in emacs
                    or with an external viewer

C-F1 C-F1 rtf-portrait
                    create an MS RTF portrait file from the current buffer 
                    with a file extension of .rtf

C-F2 C-F2 rtf-landscape
                    create an MS RTF landscape file from the current buffer 
                    with a file extension of .rtf

C-F3 C-F8 submit-region C-c C-r 
                    write region to ess-temp.sas and submit

C-F5 C-F6 append-to-log    
                    append ess-temp.log to the current .log file

C-F6 C-F7 append-to-output 
                    append ess-temp.lst to the current .lst file

C-F9 C-F9 INSIGHT 
                    open an interactive INSIGHT session on the SAS 
                    dataset near point

C-F10 C-F10 kill-em-all
                    kill all buffers associated with a .sas program
</pre></td></tr></table>
<p>SUBMIT, PROGRAM, LOG and OUTPUT need no further explanation since
they mimic the SAS Display Manager function key definitions.  However, six 
other keys have been provided for convenience and are described below.

</p><p>`shell' switches you to the *shell* buffer where you can interact with
your operating system.  This is especially helpful if you would like to 
kill a SAS batch job.  You can specify a different buffer name to 
associate with a SAS batch job (besides *shell*) with the buffer-local 
variable ess-sas-shell-buffer.  This allows you to have multiple 
buffers running SAS batch jobs on multiple local/remote computers
that may rely on different methods specified by the buffer-local variable
ess-sas-submit-method.

</p><p>F2 performs the `refresh' operation on the current buffer.  `refresh'
compares the buffer's last modified date/time with the file's last
modified date/time and replaces the buffer with the file if the file is
newer.  This is the same operation that is automatically performed when
LOG, OUTPUT, `filetype-1' or F11 are pressed.

</p><p>`filetype-1' switches you to a file with the same file name as your .sas
file, but with a different extension (.txt by default) and performs
`refresh'.  You can over-ride the default extension; for example in your
.emacs file:
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-sas-suffix-1 &quot;csv&quot;) ; for example
</pre></td></tr></table>
<p>F9 will prompt you for the name of a permanent SAS dataset near point to
be opened for viewing by PROC FSEDIT.  You can control the SAS batch
command-line with ess-sas-data-view-submit-options.  For controlling the
SAS batch commands, you have the global variables
ess-sas-data-view-libname and ess-sas-data-view-fsview-command as well
as the buffer-local variable ess-sas-data-view-fsview-statement.  If you
have your SAS LIBNAMEs defined in autoexec.sas, then the defaults for
these variables should be sufficient.

</p><p>Similarly, C-F9 will prompt you for the name of a permanent SAS dataset
near point to be opened for viewing by PROC INSIGHT.  You can control
the SAS batch command-line with ess-sas-data-view-submit-options.  For
controlling the SAS batch commands, you have the global variables
ess-sas-data-view-libname and ess-sas-data-view-insight-command as well
as the buffer-local variable ess-sas-data-view-insight-statement. 

</p><p>F10 toggles ESS[SAS] mode for .log files which is off by default
(technically, it is SAS-log-mode, but it looks the same).  The syntax
highlighting can be helpful in certain debugging situations, but large
.log files may take a long time to highlight.

</p><p>F11 is the same as `filetype-1' except it is .dat by default.  

</p><p>F12 will prompt you for the name of a GSASFILE near the point in .log to
be opened for viewing either with emacs or with an external viewer.
Depending on your version of emacs and the operating system you are
using, emacs may support .gif and .jpg files internally.  You may need
to change the following variables for your own situation.  
ess-sas-graph-view-suffix-regexp is a regular expression of supported 
file types defined via file name extensions.  
ess-sas-graph-view-viewer-default is the default external viewer for
your platform.  ess-sas-graph-view-viewer-alist is an alist of 
exceptions to the default; i.e. file types and their associated
viewers which will be used rather than the default viewer.
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-sas-graph-view-suffix-regexp (concat &quot;[.]\\([eE]?[pP][sS]\\|&quot;
&quot;[pP][dD][fF]\\|[gG][iI][fF]\\|[jJ][pP][eE]?[gG]\\|&quot;
&quot;[tT][iI][fF][fF]?\\)&quot;)) ;; default
(setq ess-sas-graph-view-viewer-default &quot;kodakimg&quot;) ;; Windows default
(setq ess-sas-graph-view-viewer-default &quot;sdtimage&quot;) ;; Solaris default
(setq ess-sas-graph-view-viewer-alist
  '((&quot;[eE]?[pP][sS]&quot; . &quot;gv&quot;) (&quot;[pP][dD][fF]&quot; . &quot;acroread&quot;)) ;; default
</pre></td></tr></table>
<p>C-F2 produces US landscape by default, however, it can produce A4
landscape (first line for &quot;global&quot; key mapping, second for &quot;local&quot;):
</p><table><tr><td>&nbsp;</td><td><pre class="example">(global-set-key [(control f2)] 'ess-sas-rtf-a4-landscape)
(define-key sas-mode-local-map [(control f2)] 'ess-sas-rtf-a4-landscape)
</pre></td></tr></table>
<hr size="6">
<a name="NOD32"></a>
<a name="SEC32"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC31" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC33" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.6 ESS[SAS]-TAB key </h2>

<p>Two options.  The TAB key is bound by default to sas-indent-line.  This
function is used to syntactically indent SAS code so PROC and RUN are in
the left margin, other statements are indented 4 spaces from the margin,
continuation lines are indented 4 spaces in from the beginning column of
that statement.  This is the type of functionality that emacs provides
in most programming language modes.  This functionality is equivalent to
uncommenting the following line in ess-site.el:
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-sas-edit-keys-toggle nil)
</pre></td></tr></table>
<p>ESS provides an alternate behavior for the TAB key that makes it behave
as it does in SAS Display Manager, i.e. move the cursor to the next tab
stop.  The alternate behavior also provides a backwards TAB, C-TAB, that
moves the cursor to the tab stop to the left and deletes any characters
between them.  This functionality is obtained by uncommenting the
following line in ess-site.el:
</p><table><tr><td>&nbsp;</td><td><pre class="example">(setq ess-sas-edit-keys-toggle t)
</pre></td></tr></table><p>Under the alternate behavior, the TAB key is bound to tab-to-tab-stop
and the tab stops are set at multiples of sas-indent-width.

</p><hr size="6">
<a name="NOD33"></a>
<a name="SEC33"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC32" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC34" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.7 ESS[SAS]-Usage scenarios </h2>

<p>We present a batch and an interactive scenario for using ESS with SAS.  
The remarks with respect to graphics apply to either with exceptions noted.

</p><p>Graphics

</p><p>Output from GPROCs can be displayed in a SAS/Graph window for SAS batch
on Windows or for both SAS batch and interactive with X11 on Unix.  If
you need to create graphics files and view them with F12, then include
the following in myfile.sas (for F12 to work the FILENAME statement must
be in myfile.sas, but the GOPTIONS statement can be in your
autoexec.sas):
</p><table><tr><td>&nbsp;</td><td><pre class="example">filename gsasfile 'graphics.ps'; 
goptions device=ps gsfname=gsasfile gsfmode=append; 
</pre></td></tr></table><p>PROC PLOT graphs can be viewed in the listing buffer.  You may
wish to control the vertical spacing to allow the entire plot
to be visible on screen, for example:
</p><table><tr><td>&nbsp;</td><td><pre class="example">proc plot;
    plot a*b / vpos=25;
run;
</pre></td></tr></table>
<p>SAS Batch (ess-sas-global-unix-keys keys shown, ess-sas-global-pc-keys in 
parentheses).

</p><p>Open the file you want to work with.  
</p><table><tr><td>&nbsp;</td><td><pre class="example">C-x C-f myfile.sas
</pre></td></tr></table><p>myfile.sas will be in ESS[SAS] mode.  Edit as appropriate, then save and 
submit the batch SAS job.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F3 (F8)
</pre></td></tr></table><p>The job runs in the shell buffer while you continue to edit 
myfile.sas.  If ess-sas-submit-method is 'sh, then the 
message buffer will display the shell notification when the 
job is complete.  The 'sh setting also allows you to 
terminate the SAS batch job before it is finished.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F8 (F3)
</pre></td></tr></table><p>Terminating a SAS batch in the *shell* buffer.
</p><table><tr><td>&nbsp;</td><td><pre class="example">kill %1
</pre></td></tr></table><p>You may want to visit the .log (whether the job is still running 
or it is finished) and check for error messages.  The .log will be
refreshed and you will be placed in it's buffer.  You will be 
taken to the 1st error message, if any.  
</p><table><tr><td>&nbsp;</td><td><pre class="example">F5 (F6)
</pre></td></tr></table><p>Goto the next error message, if any.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F5 (F6)
</pre></td></tr></table><p>Now, refresh the .lst and go to it's buffer.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F6 (F7)
</pre></td></tr></table><p>If you wish to make changes, go to the .sas file with.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F4 (F5)
</pre></td></tr></table><p>Make your editing changes and submit again.
</p><table><tr><td>&nbsp;</td><td><pre class="example">F3 (F8)
</pre></td></tr></table>
<p>Interactive SAS

</p><p>Open the file you want to work with.
</p><table><tr><td>&nbsp;</td><td><pre class="example">C-x C-f myfile.sas
</pre></td></tr></table><p>myfile.sas will be in ESS[SAS] mode.  Edit as appropriate, and then start 
up SAS with the cursor in the myfile.sas buffer.
</p><table><tr><td>&nbsp;</td><td><pre class="example">M-x SAS
</pre></td></tr></table><p>Four buffers will appear on screen:
</p><table><tr><td>&nbsp;</td><td><pre class="example">Buffer          Mode            Description
myfile.sas      ESS[SAS]        your source file
*SAS:1*         iESS [SAS:1]    ESS communication buffer
*SAS:1.log*     Shell [] ESStr  SAS log information
*SAS:1.lst*     Shell [] ESSlst SAS listing information
</pre></td></tr></table><p>If you would prefer each of the four buffers to appear in its
own individual frame, you can arrange for that.  Place the
cursor in the buffer displaying myfile.sas.  Enter the
sequence:
</p><table><tr><td>&nbsp;</td><td><pre class="example">C-c C-w
</pre></td></tr></table><p>The cursor will normally be in buffer myfile.sas.
If not, put it there:
</p><table><tr><td>&nbsp;</td><td><pre class="example">C-x b myfile.sas
</pre></td></tr></table><p>Send regions, lines, or the entire file contents to SAS
(regions are most useful).  A highlighted region will normally
begin with the keywords 'DATA' or 'PROC' and end with the
keyword 'RUN;'
</p><table><tr><td>&nbsp;</td><td><pre class="example">C-c C-r
</pre></td></tr></table><p>Information appears in the log buffer, analysis results in the
listing buffer.  In case of errors, make the corrections in the
myfile.sas buffer and resubmit with another C-c C-r

</p><p>At the end of the session you may save the log and listing
buffers with the usual C-x C-s commands.  You will be prompted
for a file name.  Typically, the names myfile.log and myfile.lst
will be used.  You will almost certainly want to edit the saved
files before including them in a report.  The files are
read-only by default.  You can make them writable by the emacs
command C-x C-q.

</p><p>At the end of the session, the input file myfile.sas will
typically have been revised.  You can save it.  It can be used
later as the beginning of another iESS[SAS] session.  It can
also be used as a batch input file to SAS.

</p><p>The *SAS:1* buffer is strictly for ESS use.  The user should
never need to read it or write to it.  Refer to the .lst and
.log buffers for monitoring output!

</p><hr size="6">
<a name="NOD34"></a>
<a name="SEC34"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC33" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC35" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.8 iESS[SAS]-Common problems </h2>

<table><tr><td>&nbsp;</td><td><pre class="display">1. iESS[SAS] does not work on Windows.  In order to run SAS inside
   an emacs buffer, it is necessary to start SAS with the -stdio option.
   SAS does not support the -stdio option on Windows.

2. If M-x SAS gives errors upon startup, check the following:
   - you are running Windows:  see 1.
   - ess-sas-sh-command (in the ESS source directory) needs to be
     executable (solution: &quot;chmod ugo+rx ess-sas-sh-command&quot;).
   - sas isn't in your executable path (verify using &quot;which sas&quot; from
     a shell command-line)

3. M-x SAS starts SAS Display Manager.  Probably, the command &quot;sas&quot; 
   on your system calls a shell script.  Specify the path to the real 
   &quot;sas&quot; executable in the file ess-sas-sh-command, i.e.:
</pre><table><tr><td>&nbsp;</td><td><pre class="example">/usr/local/sas612/sas &lt;/dev/tty 1&gt;$stdout 2&gt;$stderr $@
</pre></td></tr></table><pre class="display">   To find the &quot;sas&quot; exectuable, you can execute the unix command:
</pre><table><tr><td>&nbsp;</td><td><pre class="example">find / -name sas -print
</pre></td></tr></table></td></tr></table>
<hr size="6">
<a name="NOD35"></a>
<a name="SEC35"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC34" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> D.9 ESS[SAS]-MS Windows </h2>

<ul>
<li>
<p>iESS[SAS] does not work on Windows.  See section <a href="#SEC34">iESS[SAS]-Common problems</a>.

</p></li><li>
<p>ESS[SAS] mode for editing SAS language files works very well.
See section <a href="#SEC28">ESS[SAS]-Editing files</a>.

</p></li><li>
<p>There are two execution options for SAS on Windows.
You can use batch.  See section <a href="#SEC30">ESS[SAS]-Batch SAS processes</a>.

</p><p>Or you can mark regions with the mouse and submit the code with
`submit-region' or paste them into SAS Display Manager.

</p></li></ul>


<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC26" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ess_6.html#SEC36" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ess.html#SEC1" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ess_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ess_14.html#SEC90" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ess_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Rodney Sparapani</em> on <em>June, 30 2004</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
